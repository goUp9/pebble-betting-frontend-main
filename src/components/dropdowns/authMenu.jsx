/* eslint-disable react/prop-types */
import {
  Menu,
  MenuHandler,
  MenuList,
  //   MenuItem,
} from "@material-tailwind/react";
import { useSupaAuth } from "../../hooks/useSupaAuth";
import { shortenAddress } from "../../lib/helper";
import { ProfileModal } from "../dialogs/profileModal";
import { useState } from "react";
import { Referral } from "../dialogs/referral";
import { Transaction } from "../dialogs/transaction";
import { Settings } from "../dialogs/settings";
import { useWallet } from "@solana/wallet-adapter-react";

export function AuthMenu({ children }) {
  const { user } = useSupaAuth();
  const [open, setOpen] = useState(false);
  const { disconnect } = useWallet();

  return (
    <Menu
      open={open}
      handler={setOpen}
      dismiss={{
        itemPress: false,
      }}
    >
      <MenuHandler>{children}</MenuHandler>

      <MenuList className="p-2 bg-blue-gray-900 w-[256px] rounded-[12px] border-none flex flex-col gap-2 border-2  border-red-600">
        <div className="flex items-center gap-2 select-none border border-[#52545A]/50 rounded-[8px] py-2 px-[17px]">
          <svg
            width="14"
            height="14"
            viewBox="0 0 14 14"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M3.42408 4.46321C1.94812 4.79741 1.21014 4.96421 1.03434 5.52881C0.859144 6.09282 1.36193 6.68142 2.36811 7.85802L2.6285 8.16222C2.9141 8.49642 3.05749 8.66382 3.12169 8.87022C3.18589 9.07722 3.16429 9.30042 3.12109 9.74623L3.08149 10.1524C2.9297 11.7226 2.8535 12.5074 3.31309 12.856C3.77268 13.2052 4.46386 12.8866 5.84503 12.2506L6.20322 12.0862C6.59561 11.905 6.7918 11.815 7 11.815C7.20819 11.815 7.40439 11.905 7.79738 12.0862L8.15437 12.2506C9.53614 12.8866 10.2273 13.2046 10.6863 12.8566C11.1465 12.5074 11.0703 11.7226 10.9185 10.1524M11.6319 7.85802C12.6381 6.68202 13.1409 6.09342 12.9657 5.52881C12.7899 4.96421 12.0519 4.79681 10.5759 4.46321L10.1943 4.37681C9.77493 4.28201 9.56554 4.23461 9.39694 4.10681C9.22895 3.97901 9.12095 3.78521 8.90495 3.39761L8.70816 3.04481C7.94798 1.6816 7.56819 1 7 1C6.43181 1 6.05202 1.6816 5.29184 3.04481"
              stroke="#C88300"
              strokeWidth="1.5"
              strokeLinecap="round"
            />
          </svg>

          {user && shortenAddress(user?.wallet_address)}
        </div>

        {/* <Degen>
          <div className="flex items-center gap-2 w-full bg-[#131518] rounded-[8px] py-2 px-4 font-bold text-sm">
            <svg
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M15.4188 0C10.6845 0 6.83789 3.61187 6.83789 8.05724C6.83789 9.699 7.37588 11.2397 8.29046 12.5279C8.58636 12.4774 8.88225 12.4268 9.17815 12.4268H9.31265L10.6845 12.4521C9.47404 11.3155 8.74776 9.74951 8.74776 8.03198C8.74776 4.59692 11.7336 1.7933 15.4188 1.7933C19.1041 1.7933 22.063 4.59692 22.063 8.05724C22.063 9.77477 21.3367 11.3408 20.1263 12.4774L20.5835 12.3511C20.8256 12.2753 21.0946 12.2248 21.3636 12.2248C21.7671 12.2248 22.1706 12.3258 22.5472 12.5026C23.4618 11.2397 23.9998 9.699 23.9998 8.05724C23.9998 3.61187 20.1263 0 15.4188 0Z"
                fill="white"
              />
              <path
                d="M19.5611 7.35009C19.9377 7.02174 19.7225 6.44081 19.2383 6.39029L17.1133 6.16297C16.9788 6.13772 16.8712 6.0872 16.8174 5.96091L15.9297 4.14235C15.7145 3.71297 15.0689 3.71297 14.8537 4.14235L13.966 5.96091C13.9122 6.06194 13.8046 6.13772 13.6701 6.16297L11.572 6.39029C11.0609 6.44081 10.8726 7.02174 11.2492 7.35009L12.8093 8.68875C12.89 8.76453 12.9438 8.89082 12.9169 8.99185L12.4865 10.9367C12.3789 11.4166 12.9169 11.7702 13.3742 11.5429L15.2303 10.5578C15.3379 10.5073 15.4724 10.5073 15.58 10.5578L17.4361 11.5429C17.8665 11.7702 18.4044 11.4166 18.3237 10.9367L17.8934 8.99185C17.8665 8.86556 17.9203 8.76453 18.0009 8.6635L19.5611 7.35009Z"
                fill="white"
              />
              <path
                d="M0.113229 20.382C-0.075068 20.6093 -0.021269 20.9376 0.220827 21.1144L4.22885 23.8928C4.47095 24.0696 4.82064 24.0191 4.98204 23.7918L6.56911 21.7711L1.7272 18.3613L0.113229 20.382Z"
                fill="white"
              />
              <path
                d="M21.0139 13.5375L17.3824 14.6236C17.3824 14.6994 17.3824 14.7752 17.3824 14.851C17.3286 15.836 16.6024 16.6695 15.5802 16.8968L15.3381 16.9474C13.9931 17.2252 12.6481 17.402 11.2763 17.4525L10.1734 17.503C9.79679 17.5283 9.50089 17.2504 9.47399 16.9221C9.44709 16.5685 9.74299 16.2907 10.0927 16.2654L11.1956 16.2149C12.4867 16.1644 13.751 16.0128 15.0153 15.735L15.2574 15.6845C15.6878 15.5834 16.0106 15.2298 16.0375 14.8257C16.0375 14.5731 15.9568 14.3458 15.7685 14.1437C15.5802 13.9669 15.3381 13.8659 15.0691 13.8406L9.2319 13.6891C8.58631 13.6638 7.96762 13.8659 7.42963 14.2195L2.69531 17.5283L7.69862 21.0139L12.5943 21.418C13.4551 21.4938 14.289 21.2412 14.9615 20.7613L22.0899 15.4319C22.3589 15.2298 22.4934 14.952 22.5203 14.6489C22.5472 14.3458 22.4396 14.0427 22.1975 13.8154C21.8747 13.5123 21.4174 13.4113 21.0139 13.5375Z"
                fill="white"
              />
            </svg>
            Degen Score
          </div>
        </Degen> */}

        <Referral>
          <div className="flex items-center gap-2 w-full bg-[#131518] rounded-[8px] py-2 px-4 font-bold text-sm">
            <svg
              width="24"
              height="26"
              viewBox="0 0 24 26"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M13.5 3.65625C13.5 3.11753 13.342 2.60087 13.0607 2.21994C12.7794 1.83901 12.3978 1.625 12 1.625C11.6022 1.625 11.2206 1.83901 10.9393 2.21994C10.658 2.60087 10.5 3.11753 10.5 3.65625C10.5 4.19497 10.658 4.71163 10.9393 5.09256C11.2206 5.47349 11.6022 5.6875 12 5.6875C12.3978 5.6875 12.7794 5.47349 13.0607 5.09256C13.342 4.71163 13.5 4.19497 13.5 3.65625ZM5.4 10.5625C5.79782 10.5625 6.17936 10.3485 6.46066 9.96756C6.74196 9.58663 6.9 9.06997 6.9 8.53125C6.9 7.99253 6.74196 7.47587 6.46066 7.09494C6.17936 6.71401 5.79782 6.5 5.4 6.5C5.00218 6.5 4.62064 6.71401 4.33934 7.09494C4.05804 7.47587 3.9 7.99253 3.9 8.53125C3.9 9.06997 4.05804 9.58663 4.33934 9.96756C4.62064 10.3485 5.00218 10.5625 5.4 10.5625ZM1.2 21.125C0.53625 21.125 0 21.8512 0 22.75C0 23.6488 0.53625 24.375 1.2 24.375H22.8C23.4638 24.375 24 23.6488 24 22.75C24 21.8512 23.4638 21.125 22.8 21.125H1.2ZM18.6 10.5625C18.9978 10.5625 19.3794 10.3485 19.6607 9.96756C19.942 9.58663 20.1 9.06997 20.1 8.53125C20.1 7.99253 19.942 7.47587 19.6607 7.09494C19.3794 6.71401 18.9978 6.5 18.6 6.5C18.2022 6.5 17.8206 6.71401 17.5393 7.09494C17.258 7.47587 17.1 7.99253 17.1 8.53125C17.1 9.06997 17.258 9.58663 17.5393 9.96756C17.8206 10.3485 18.2022 10.5625 18.6 10.5625ZM7.5 15.9199L8.50875 18.4539C8.745 19.048 9.28875 19.2664 9.7275 18.9516C10.1663 18.6367 10.3275 17.8953 10.095 17.3012L8.73375 13.8734C8.7975 13.7871 8.85375 13.6906 8.895 13.5789L9.9 11.0449V13.8125C9.9 14.7113 10.4363 15.4375 11.1 15.4375H12.9C13.5638 15.4375 14.1 14.7113 14.1 13.8125V11.0449L15.1088 13.5789C15.1538 13.6906 15.2063 13.7871 15.27 13.8734L13.9088 17.3012C13.6725 17.8953 13.8375 18.6316 14.2763 18.9516C14.715 19.2715 15.2588 19.048 15.495 18.4539L16.5 15.9199V17.875C16.5 18.7738 17.0363 19.5 17.7 19.5H19.5C20.1638 19.5 20.7 18.7738 20.7 17.875V15.9199L21.7088 18.4539C21.945 19.048 22.4888 19.2664 22.9275 18.9516C23.3663 18.6367 23.5275 17.8953 23.295 17.3012L21.8738 13.7312C21.3 12.284 20.1825 11.3801 18.9675 11.3801H18.2325C17.6213 11.3801 17.0363 11.6086 16.53 12.0199L15.27 8.85625C14.6963 7.40898 13.5788 6.50508 12.3638 6.50508H11.6325C10.4175 6.50508 9.30375 7.40898 8.72625 8.85625L7.46625 12.0199C6.96 11.6086 6.375 11.3801 5.76375 11.3801H5.0325C3.8175 11.3801 2.70375 12.284 2.12625 13.7312L0.70875 17.2961C0.4725 17.8902 0.6375 18.6266 1.07625 18.9465C1.515 19.2664 2.05875 19.043 2.295 18.4488L3.3 15.9199V17.875C3.3 18.7738 3.83625 19.5 4.5 19.5H6.3C6.96375 19.5 7.5 18.7738 7.5 17.875V15.9199Z"
                fill="white"
              />
            </svg>
            Referral
          </div>
        </Referral>

        <ProfileModal>
          <div className="flex items-center gap-2 w-full bg-[#131518] rounded-[8px] py-2 px-4 font-bold text-sm">
            <svg
              width="20"
              height="20"
              viewBox="0 0 20 20"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M10 0C7.25 0 5 2.8 5 6.25C5 9.7 7.25 12.5 10 12.5C12.75 12.5 15 9.7 15 6.25C15 2.8 12.75 0 10 0ZM4.775 12.5C2.125 12.625 0 14.8 0 17.5V20H20V17.5C20 14.8 17.9 12.625 15.225 12.5C13.875 14.025 12.025 15 10 15C7.975 15 6.125 14.025 4.775 12.5Z"
                fill="white"
              />
            </svg>
            Profile
          </div>
        </ProfileModal>

        <Transaction>
          <div className="flex items-center gap-2 w-full bg-[#131518] rounded-[8px] py-2 px-4 font-bold text-sm">
            <svg
              width="24"
              height="25"
              viewBox="0 0 24 25"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M5.23959 18.6978C6.05948 17.8179 7.30934 17.8879 8.02925 18.8478L9.03914 20.1976C9.84904 21.2675 11.1589 21.2675 11.9688 20.1976L12.9786 18.8478C13.6986 17.8879 14.9484 17.8179 15.7683 18.6978C17.5481 20.5976 18.9979 19.9676 18.9979 17.308V6.03937C18.9979 2.00987 18.058 1 14.2785 1H6.71941C2.93988 1 2 2.00987 2 6.03937V17.298C2.01 19.9676 3.46981 20.5876 5.23959 18.6978Z"
                stroke="white"
                strokeWidth="2"
                strokeLinecap="round"
                strokeLinejoin="round"
              />
              <path
                d="M7.76172 8.99805H13.261"
                stroke="white"
                strokeWidth="1.5"
                strokeLinecap="round"
                strokeLinejoin="round"
              />
            </svg>
            Transaction History
          </div>
        </Transaction>

        <Settings>
          <div className="flex items-center gap-2 w-full bg-[#131518] rounded-[8px] py-2 px-4 font-bold text-sm">
            <svg
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                fillRule="evenodd"
                clipRule="evenodd"
                d="M14.0004 2C14.5526 2 15.0004 2.44769 15.0004 3V3.90753C15.0004 4.31488 15.2504 4.67633 15.6136 4.8606C15.8761 4.99365 16.1302 5.14075 16.3751 5.3009C16.7162 5.52417 17.1547 5.56018 17.5077 5.35626L18.2948 4.90192C18.7731 4.62579 19.3846 4.78967 19.6608 5.26794L21.6608 8.73206C21.9369 9.21033 21.7731 9.82196 21.2948 10.0981L20.507 10.553C20.1544 10.7565 19.9664 11.153 19.9884 11.5593C19.9965 11.7052 20.0004 11.8522 20.0004 12C20.0004 12.1478 19.9965 12.2948 19.9884 12.4407C19.9664 12.847 20.1544 13.2435 20.507 13.447L21.2948 13.9019C21.7731 14.178 21.9369 14.7897 21.6608 15.2679L19.6608 18.7321C19.3846 19.2103 18.7731 19.3742 18.2948 19.0981L17.5077 18.6437C17.1547 18.4398 16.7162 18.4758 16.3751 18.6991C16.2457 18.7838 16.1136 18.8647 15.9791 18.942C15.8593 19.0109 15.7374 19.0767 15.6136 19.1394C15.2504 19.3237 15.0004 19.6851 15.0004 20.0925V21C15.0004 21.5523 14.5526 22 14.0004 22H10.0004C9.44811 22 9.00036 21.5523 9.00036 21V20.0925C9.00036 19.6851 8.75036 19.3237 8.38707 19.1394C8.12462 19.0063 7.87072 18.8593 7.62584 18.6991C7.28478 18.4758 6.8463 18.4399 6.49328 18.6437L5.70617 19.0981C5.2279 19.3742 4.61632 19.2103 4.3402 18.7321L2.3402 15.2679C2.06408 14.7897 2.22789 14.178 2.70617 13.9019L3.49376 13.4471C3.8463 13.2437 4.03429 12.8471 4.01232 12.4408C4.00426 12.2949 4.00036 12.1479 4.00036 12C4.00036 11.8994 4.00206 11.7993 4.00573 11.6996C4.00744 11.6527 4.00963 11.6059 4.01232 11.5592C4.03429 11.1529 3.8463 10.7563 3.49376 10.5529L2.70617 10.0981C2.22789 9.82196 2.06408 9.21033 2.3402 8.73206L4.3402 5.26794C4.61632 4.78967 5.2279 4.62579 5.70617 4.90192L6.49328 5.35626C6.8463 5.56012 7.28478 5.52417 7.62584 5.3009C7.87072 5.14075 8.12462 4.99365 8.38707 4.8606C8.75036 4.67633 9.00036 4.31488 9.00036 3.90753V3C9.00036 2.44769 9.44811 2 10.0004 2H14.0004ZM12.0004 8C9.79113 8 8.00036 9.79083 8.00036 12C8.00036 14.2092 9.79113 16 12.0004 16C14.2096 16 16.0004 14.2092 16.0004 12C16.0004 9.79083 14.2096 8 12.0004 8Z"
                fill="white"
              />
            </svg>
            Settings
          </div>
        </Settings>

        <div
          className="flex items-center gap-2 w-full bg-[#131518] rounded-[8px] py-2 px-4 font-bold text-sm outline-none text-white cursor-pointer"
          onClick={async () => {
            await disconnect();
          }}
        >
          <svg
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M8.5 1V3.71429H18.5V17.2857H8.5V20H21V1H8.5ZM6 6.42857L1 10.5L6 14.5714V11.8571H16V9.14286H6V6.42857Z"
              fill="white"
            />
          </svg>
          Logout
        </div>
      </MenuList>
    </Menu>
  );
}
